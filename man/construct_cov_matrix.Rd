% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/construct_cov_matrix.R
\name{construct_cov_matrix}
\alias{construct_cov_matrix}
\title{Construct a Covariance Matrix with Constant Correlation}
\usage{
construct_cov_matrix(years, variances, rho = "max")
}
\arguments{
\item{years}{Numeric vector of years corresponding to the estimates.}

\item{variances}{Numeric vector of variances for each estimate. Must be non-negative
and the same length as \code{years}.}

\item{rho}{Either \code{"max"}, \code{"min"}, or a numeric value between 0 and 1
specifying the correlation coefficient. If \code{"max"}, the function calculates
the maximum allowable correlation coefficient that results in a positive semi-definite
covariance matrix. If \code{"min"}, the correlation coefficient is set to 0.}
}
\value{
A list containing:
\describe{
\item{\code{cov_matrix}}{The constructed covariance matrix.}
\item{\code{rho}}{The correlation coefficient used to construct the covariance matrix.}
}
}
\description{
Constructs a covariance matrix for Difference-in-Differences (DiD) estimates,
assuming a constant correlation coefficient between different periods.
The function can compute the maximum allowable correlation coefficient that ensures
the resulting covariance matrix is positive semi-definite (PSD).
}
\examples{
# Example 1: Using the maximum allowable correlation coefficient
years <- c(2008, 2009, 2010, 2011)
variances <- c(0.0001, 0.0002, 0.00015, 0.00012)
result_max <- construct_cov_matrix(years, variances, rho = 'max')
print(result_max$cov_matrix)
print(result_max$rho)

# Example 2: Using a specified correlation coefficient
rho_value <- 0.5
result_specified <- construct_cov_matrix(years, variances, rho = rho_value)
print(result_specified$cov_matrix)
print(result_specified$rho)

# Example 3: Using the minimum correlation coefficient (rho = 0)
result_min <- construct_cov_matrix(years, variances, rho = 'min')
print(result_min$cov_matrix)
print(result_min$rho)

# Example 4: Handling variances of different magnitudes
years <- c(2010, 2011, 2012)
variances <- c(0.0005, 0.0001, 0.0003)
result <- construct_cov_matrix(years, variances, rho = 'max')
print(result$cov_matrix)
print(result$rho)
}
